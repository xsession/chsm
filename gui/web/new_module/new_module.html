<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="../main.css">
        <link rel="stylesheet" type="text/css" href="../drawing.css">
        <link rel="stylesheet" type="text/css" href="./new_module.css">
        <link rel="stylesheet" id="new_module_theme_sheet" type="text/css" href="../themes/default.css">
        <link rel="stylesheet" type="text/html" href="../main.html">
        <script type="text/javascript" src="/eel.js"></script>
        <script type='module' src="./new_module.js"></script>
        <title>New Module</title>
    </head>
    <body>
        <form>
            <fieldset>
                <legend id="new_module_legend" >New module</legend>
            <fieldset id="modul_gen_fs">
                <legend>Module</legend>
                <ul class='props'>
                        <table>
                            <tr>
                                <td><label for="module_name">Module name</label></td>
                                <td><input id="module_name" type="text"></td>
                            </tr>
                            <tr>
                                <td><label for="module_version">Module version</label></td>
                                <td><input id="module_version" type="text" value="0.0.0."></td>
                            </tr>
                            <tr>
                                <td><label for="author_nick_name">Author Nick Name</label></td>
                                <td><input id="author_nick_name" type="text" value="nick2"></td>
                            </tr>
                            <tr>
                                <td><label for="author_full_name">Author Full Name</label></td>
                                <td><input id="author_full_name" type="text" value="Nick Smith"></td>
                            </tr>
                            <tr>
                                <td><label for="module_description">Module description</label></td>
                                <td><textarea id="module_description"></textarea></td>
                            </tr>
                            <tr id="modul_loc_tr">
                                <td><label for="module_location">Module location</label></td>
                                <td><input id="module_location" type="url"></td>
                                <td><div id='btn-new-module-loc-browse' class='button' alt='Borwse for module location.'>Browse</div></td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="licence-selector">Select licence option</label>
                                    <select name="licence-selector" id="licence-selector">
                                        <option value="mit_opt">MIT</option>
                                        <option value="bsd_3_opt">BSD-3</option>
                                        <option value="gpl_3_opt">GNU GPL v3.0</option>
                                        <option value="apache_2_opt">Apache Software Licence 2.0</option>
                                        <option value="mpl_2_opt">Mozilla Public Licence 2.0</option>
                                    </select>
                                </td>
                            </tr>
                        </table>

                    </fieldset>
            <br>
            <fieldset id="cmake_gen_fs">
                <legend>CMake generation</legend>
                <ul class='props'>
                    <div>
                        <li>
                            <table>
                                <tr class="checkbox-lable">
                                    <label for="comm-selector">Select comm_periph </label>
                                    <select name="comm-selector" id="comm-selector">
                                        <option value="i2c_opt">I2C</option>
                                        <option value="spi_opt">SPI</option>
                                        <option value="can_opt">CAN</option>
                                    </select>
                                </tr>
                                <tr>
                                    <td><label for="package_name">Package Name</label></td>
                                    <td><input id="package_name" type="text" value="chsm"></td>
                                </tr>
                                <br>
                                <tr>
                                    <td><label for="linked_libs">Linked Libs</label></td>
                                    <td><textarea id="linked_libs" type="text" value="linked libs"></textarea></td>
                                </tr>
                                <br>
                                <tr>
                                    <td><label for="device_address">Device Address</label></td>
                                    <td><input id="device_address" type="text" value="0x3F"></td>
                                </tr>
                        </table>
                    </li>
                </div>

            </fieldset>
            <br>
            <div id="generate-btns_container">
                <div id='btn-generate' class='button' alt='Generate the setup module.'>Generate</div>
                <div id='btn-cancel' class='button' alt='Cancel from setup module.'>Cancel</div>
            </div>
        </fieldset>
        </form>
        <script>
                function init_theme_selector()
                {
                    const theme_sheet = document.getElementById("new_module_theme_sheet");
                    var cookies = document.cookie
                        .split(';')
                        .map(cookie => cookie.split('='))
                        .reduce((accumulator, [key, value]) =>
                            ({ ...accumulator, [key.trim()]: decodeURIComponent(value)}), {} );
                    console.log(cookies.theme);
                const currentTheme = cookies.theme;
    
                function activateTheme(themeName) {
                    theme_sheet.setAttribute("href", `../themes/${themeName}.css`);
                }
    
                activateTheme(currentTheme);
            }
    
            init_theme_selector();
        </script>

        <div></div>
    </body>
</html>
